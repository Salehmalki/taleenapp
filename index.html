<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ØªØ¹Ù„Ù… Ù†Ø³Ø¨ Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯ ï·º</title>
  <link rel="stylesheet" href="assets/css/enhanced-style.css">
  <link rel="stylesheet" href="assets/css/enhanced-safari-fix.css">
  <link rel="stylesheet" href="assets/css/ui-consistency-fix.css">
  <link rel="stylesheet" href="assets/css/mobile-compatibility.css">
  <script src="assets/js/simplified-audio.js" defer></script>
  <script src="assets/js/enhanced-safari-compatibility.js" defer></script>
  <script src="assets/js/mobile-compatibility.js" defer></script>
  <script src="assets/js/updated-genealogy-data.js" defer></script>
</head>
<body>
  <header>
    <h1>ØªØ¹Ù„Ù… Ù†Ø³Ø¨ Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯ ï·º</h1>
    <p class="subtitle">ØªØ·Ø¨ÙŠÙ‚ ØªØ¹Ù„ÙŠÙ…ÙŠ Ù„Ù„Ø£Ø·ÙØ§Ù„</p>
  </header>

  <main>
    <div class="card">
      <h2>Ù†Ø³Ø¨ Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯ ï·º</h2>
      <p>
        Ù‡Ùˆ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ Ø¨Ù† Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø·Ù„Ø¨ Ø¨Ù† Ù‡Ø§Ø´Ù… Ø¨Ù† Ø¹Ø¨Ø¯ Ù…Ù†Ø§Ù Ø¨Ù† Ù‚ØµÙŠ Ø¨Ù† ÙƒÙ„Ø§Ø¨ Ø¨Ù† Ù…Ø±Ø© Ø¨Ù† ÙƒØ¹Ø¨ Ø¨Ù† Ù„Ø¤ÙŠ Ø¨Ù† ØºØ§Ù„Ø¨ Ø¨Ù† ÙÙ‡Ø± (ÙˆÙ‡Ùˆ Ø§Ù„Ù…Ø³Ù…Ù‰ Ù‚Ø±ÙŠØ´Ù‹Ø§) Ø¨Ù† Ù…Ø§Ù„Ùƒ Ø¨Ù† Ø§Ù„Ù†Ø¶Ø± Ø¨Ù† ÙƒÙ†Ø§Ù†Ø© Ø¨Ù† Ø®Ø²ÙŠÙ…Ø© Ø¨Ù† Ù…Ø¯Ø±ÙƒØ© Ø¨Ù† Ø¥Ù„ÙŠØ§Ø³ Ø¨Ù† Ù…Ø¶Ø± Ø¨Ù† Ù†Ø²Ø§Ø± Ø¨Ù† Ù…Ø¹Ø¯ Ø¨Ù† Ø¹Ø¯Ù†Ø§Ù†. ÙˆÙŠØ±ØªÙØ¹ Ù†Ø³Ø¨ Ø¹Ø¯Ù†Ø§Ù† ÙƒÙ…Ø§ Ù‡Ùˆ Ù…Ø´Ù‡ÙˆØ± Ø¥Ù„Ù‰ Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„ Ø¨Ù† Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ù„ÙŠÙ‡Ù…Ø§ Ø§Ù„Ø³Ù„Ø§Ù….
      </p>
      
      <div class="ancestors-tree" id="ancestors-tree">
        <!-- Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø´Ø¬Ø±Ø© Ø§Ù„Ù†Ø³Ø¨ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… JavaScript -->
      </div>
    </div>

    <div class="card">
      <h2>ØªØ¹Ù„Ù… Ù†Ø³Ø¨ Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯ ï·º</h2>
      <p>
        ÙŠØ¹Ø¯ ØªØ¹Ù„Ù… Ù†Ø³Ø¨ Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯ ï·º Ù…Ù† Ø§Ù„Ø£Ù…ÙˆØ± Ø§Ù„Ù…Ù‡Ù…Ø© Ø§Ù„ØªÙŠ ØªØ³Ø§Ø¹Ø¯Ù†Ø§ Ø¹Ù„Ù‰ ÙÙ‡Ù… ØªØ§Ø±ÙŠØ®Ù‡ Ø§Ù„Ø´Ø±ÙŠÙ ÙˆØ£ØµÙ„Ù‡ Ø§Ù„ÙƒØ±ÙŠÙ…. 
        Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ Ù„ØªØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ù†Ø³Ø¨ Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯ ï·º Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø³Ù‡Ù„Ø© ÙˆÙ…Ù…ØªØ¹Ø©.
      </p>
      <div class="start-button">
        <a href="quiz.html" class="clickable">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</a>
      </div>
    </div>
  </main>

  <footer>
    <p>Ø¹Ù…Ù„ Ø§Ù„Ø·Ø§Ù„Ø¨Ø©: ØªØ§Ù„ÙŠÙ† Ø§Ù„Ù…Ø§Ù„ÙƒÙŠ | Ø¥Ø´Ø±Ø§Ù: Ø§Ù„Ù…Ø¹Ù„Ù…Ø© Ù…Ù†ÙŠØ±Ø© Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ</p>
  </footer>

  <div class="mobile-nav">
    <a href="index.html" class="mobile-nav-button clickable">
      <div class="mobile-nav-icon">ğŸ </div>
      <div>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
    </a>
    <a href="quiz.html" class="mobile-nav-button clickable">
      <div class="mobile-nav-icon">ğŸ“</div>
      <div>Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</div>
    </a>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Ø¥Ù†Ø´Ø§Ø¡ Ø´Ø¬Ø±Ø© Ø§Ù„Ù†Ø³Ø¨
      const ancestorsTree = document.getElementById('ancestors-tree');
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ù„Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯ ï·º
      createAncestorCard('Ù…Ø­Ù…Ø¯', ancestorsTree);
      
      // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ù„Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø£Ø¬Ø¯Ø§Ø¯
      ancestorsTree.addEventListener('click', function(e) {
        const card = e.target.closest('.ancestor-card');
        if (card) {
          const name = card.getAttribute('data-name');
          showAncestorInfo(name, e);
          
          // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ù‚Ø±Ø©
          if (typeof playClickSound === 'function') {
            playClickSound();
          }
        }
      });
    });

    // Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ø¬Ø¯
    function createAncestorCard(name, container) {
      if (!ancestorsData[name]) return;
      
      const card = document.createElement('div');
      card.className = 'ancestor-card clickable';
      card.setAttribute('data-name', name);
      
      // Ø¥Ø¶Ø§ÙØ© Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…Ù†Ø§Ø³Ø¨Ø©
      const iconClass = ancestorsData[name].icon || 'icon_ancestor';
      card.innerHTML = `
        <div class="ancestor-icon ${iconClass}"></div>
        <div class="ancestor-name">${name}</div>
      `;
      
      container.appendChild(card);
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø§Øª Ù„Ù„ÙˆØ§Ù„Ø¯ÙŠÙ† Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
      if (ancestorsData[name].father) {
        const fatherContainer = document.createElement('div');
        fatherContainer.className = 'ancestor-children';
        container.appendChild(fatherContainer);
        createAncestorCard(ancestorsData[name].father, fatherContainer);
      }
      
      if (ancestorsData[name].mother) {
        const motherContainer = document.createElement('div');
        motherContainer.className = 'ancestor-children';
        container.appendChild(motherContainer);
        createAncestorCard(ancestorsData[name].mother, motherContainer);
      }
    }

    // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ø¯
    function showAncestorInfo(name, event) {
      // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ ØªÙ„Ù…ÙŠØ­Ø§Øª Ø³Ø§Ø¨Ù‚Ø©
      const oldTooltip = document.querySelector('.tooltip');
      if (oldTooltip) {
        oldTooltip.remove();
      }
      
      if (!ancestorsData[name]) return;
      
      // Ø¥Ù†Ø´Ø§Ø¡ ØªÙ„Ù…ÙŠØ­ Ø¬Ø¯ÙŠØ¯
      const tooltip = document.createElement('div');
      tooltip.className = 'tooltip';
      tooltip.innerHTML = `
        <h3>${ancestorsData[name].title}</h3>
        <p>${ancestorsData[name].info}</p>
      `;
      
      // ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙ„Ù…ÙŠØ­
      const card = event.target.closest('.ancestor-card');
      const rect = card.getBoundingClientRect();
      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      
      // ØªØ­Ø³ÙŠÙ† Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙ„Ù…ÙŠØ­ Ù„Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø©
      const isMobile = window.innerWidth <= 768;
      if (isMobile) {
        const windowWidth = window.innerWidth;
        const tooltipWidth = Math.min(windowWidth * 0.9, 300);
        
        tooltip.style.maxWidth = tooltipWidth + 'px';
        tooltip.style.left = Math.max(10, (windowWidth - tooltipWidth) / 2) + 'px';
        tooltip.style.top = (rect.bottom + scrollTop + 10) + 'px';
        
        // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø¥ØºÙ„Ø§Ù‚ Ù„Ù„ØªÙ„Ù…ÙŠØ­ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø­Ù…ÙˆÙ„Ø©
        const closeButton = document.createElement('button');
        closeButton.className = 'close-tooltip';
        closeButton.innerHTML = 'Ã—';
        closeButton.addEventListener('click', function() {
          tooltip.remove();
        });
        tooltip.insertBefore(closeButton, tooltip.firstChild);
      } else {
        tooltip.style.top = (rect.bottom + scrollTop + 10) + 'px';
        tooltip.style.left = (rect.left + (rect.width / 2) - 150) + 'px';
      }
      
      document.body.appendChild(tooltip);
      
      // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙ„Ù…ÙŠØ­ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù† Ø¢Ø®Ø±
      setTimeout(() => {
        document.addEventListener('click', function closeTooltip(e) {
          if (!tooltip.contains(e.target) && !card.contains(e.target)) {
            tooltip.remove();
            document.removeEventListener('click', closeTooltip);
          }
        });
      }, 10);
    }
  </script>
</body>
</html>
