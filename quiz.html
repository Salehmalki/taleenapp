<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>اختبار نسب النبي ﷺ</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body { font-family: 'Segoe UI', sans-serif; background-color: #fdfcf8; margin: 0; padding: 0; text-align: right; direction: rtl; }
    header { background-color: #556b2f; color: white; padding: 20px; text-align: center; font-size: 1.5em; }
    .quiz-container { max-width: 700px; margin: 30px auto; padding: 20px; background: #fffdf6; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .question-box { background: #f0f6ec; padding: 15px; border-right: 5px solid #6b8e23; border-radius: 10px; margin-bottom: 20px; font-weight: bold; }
    .answers-box { display: flex; flex-direction: column; gap: 15px; }
    .answers-box button { padding: 15px; font-size: 1.1em; border: none; border-radius: 10px; background-color: #eef2e5; cursor: pointer; transition: 0.3s ease; text-align: center; }
    .answers-box button:hover { background-color: #dbe6c3; }
    #timer { text-align: center; font-size: 1.1em; margin-top: 20px; color: #444; }
    #result { text-align: center; font-size: 1.3em; background-color: #fff8e1; padding: 15px; border-radius: 10px; display: none; margin-top: 20px; }
    footer { background-color: #eee7d5; text-align: center; padding: 10px; font-size: 0.9em; color: #333; margin-top: 40px; border-top: 1px solid #ccc; }
  </style>
</head>
<body>
  <header>
    <h1>اختبر معلوماتك في نسب النبي ﷺ</h1>
  </header>

  <main class="quiz-container">
    <div id="quizBox">
      <div id="question" class="question-box"></div>
      <div id="answers" class="answers-box"></div>
      <div id="timer">الوقت: <span id="time">120</span> ثانية</div>
    </div>
    <div id="result"></div>
  </main>

  <footer>
    <p>عمل الطالبة: تالين المالكي | إشراف: المعلمة منيرة الدوسري</p>
  </footer>

  <script>
    const questions = [
      {
        q: "ما اسم والدة النبي ﷺ؟",
        a: ["صفية بنت عبد المطلب", "أم سلمة", "آمنة بنت وهب", "زينب بنت جحش"],
        correct: 2
      },
      {
        q: "من هو جد النبي ﷺ من جهة أبيه؟",
        a: ["عبد مناف", "هاشم", "عبد المطلب", "قصي"],
        correct: 2
      },
      {
        q: "من هو والد النبي محمد ﷺ؟",
        a: ["أبو طالب", "حمزة بن عبد المطلب", "عبد الله بن عبد المطلب", "العباس بن عبد المطلب"],
        correct: 2
      }
    ];

    let current = 0;
    let score = 0;
    let timeLeft = 120;
    let timer;

    const correctSound = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_6b48e5d953.mp3");
    const wrongSound = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_d464769a1f.mp3");

    window.onload = () => {
  questions.sort(() => Math.random() - 0.5);
      showQuestion();
      startTimer();
    };

    function startTimer() {
      timer = setInterval(() => {
        timeLeft--;
        document.getElementById("time").textContent = timeLeft;
        if (timeLeft <= 0) endQuiz();
      }, 1000);
    }

    function showQuestion() {
      const q = questions[current];
      document.getElementById("question").textContent = q.q;
      const answersDiv = document.getElementById("answers");
      answersDiv.innerHTML = "";
      q.a.forEach((ans, index) => {
        const btn = document.createElement("button");
        btn.textContent = ans;
        btn.onclick = () => checkAnswer(index);
        answersDiv.appendChild(btn);
      });
    }

    function checkAnswer(selected) {
      const correct = questions[current].correct;
      if (selected === correct) {
        correctSound.play();
        score++;
      } else {
        wrongSound.play();
      }
      current++;
      if (current < questions.length) {
        setTimeout(showQuestion, 500);
      } else {
        endQuiz();
      }
    }

    function endQuiz() {
      clearInterval(timer);
      document.getElementById("quizBox").style.display = "none";
      const result = document.getElementById("result");
      result.style.display = "block";
      result.innerHTML = (score === questions.length ?
        "<p>ممتاز! لقد أجبت على جميع الأسئلة بشكل صحيح!</p>" :
        `<p>لقد أجبت على ${score} من ${questions.length} أسئلة.</p>`) +
        '<div style="margin-top: 20px;"><a href="quiz.html" style="padding: 10px 20px; margin: 5px; background-color: #6b8e23; color: white; border-radius: 8px; text-decoration: none;">🔁 إعادة الاختبار</a>' +
        '<a href="index.html" style="padding: 10px 20px; margin: 5px; background-color: #3b6e75; color: white; border-radius: 8px; text-decoration: none;">🏠 الصفحة الرئيسية</a></div>';
    }
  </script>
</body>
</html>
