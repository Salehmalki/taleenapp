<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ุงุฎุชุจุงุฑ ูุณุจ ุงููุจู ูุญูุฏ ๏ทบ</title>
  <link rel="stylesheet" href="assets/css/enhanced-style.css">
  <link rel="stylesheet" href="assets/css/enhanced-safari-fix.css">
  <link rel="stylesheet" href="assets/css/ui-consistency-fix.css">
  <link rel="stylesheet" href="assets/css/mobile-compatibility.css">
  <link rel="stylesheet" href="assets/css/countdown-timer.css">
  <script src="assets/js/simplified-audio.js" defer></script>
  <script src="assets/js/enhanced-safari-compatibility.js" defer></script>
  <script src="assets/js/mobile-compatibility.js" defer></script>
  <script src="assets/js/updated-quiz-questions.js" defer></script>
</head>
<body>
  <header>
    <h1>ุงุฎุชุจุงุฑ ูุณุจ ุงููุจู ูุญูุฏ ๏ทบ</h1>
    <p class="subtitle">ุงุฎุชุจุฑู ูุนูููุงุชู ุนู ูุณุจ ุงููุจู ูุญูุฏ ๏ทบ</p>
  </header>

  <main>
    <div class="quiz-container">
      <div class="timer-container">
        <div class="timer-progress">
          <div id="timer-bar"></div>
        </div>
        <div id="timer-text">30</div>
      </div>
      
      <div id="question-container">
        <h2 id="question-text">ุฌุงุฑู ุชุญููู ุงูุฃุณุฆูุฉ...</h2>
        <div class="answers-box" id="answers-box">
          <!-- ุณูุชู ุฅูุดุงุก ุงูุฅุฌุงุจุงุช ุฏููุงูููููุง ุจุงุณุชุฎุฏุงู JavaScript -->
        </div>
      </div>
      
      <div id="result-container" style="display: none;">
        <h2>ูุชูุฌุฉ ุงูุงุฎุชุจุงุฑ</h2>
        <p id="result-text"></p>
        <div class="result-buttons">
          <button id="retry-button" class="result-button retry clickable">ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ</button>
          <a href="index.html" class="result-button home clickable">ุงูุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ</a>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <p>ุนูู ุงูุทุงูุจุฉ: ุชุงููู ุงููุงููู | ุฅุดุฑุงู: ุงููุนููุฉ ูููุฑุฉ ุงูุฏูุณุฑู</p>
  </footer>

  <div class="mobile-nav">
    <a href="index.html" class="mobile-nav-button clickable">
      <div class="mobile-nav-icon">๐</div>
      <div>ุงูุฑุฆูุณูุฉ</div>
    </a>
    <a href="quiz.html" class="mobile-nav-button clickable">
      <div class="mobile-nav-icon">๐</div>
      <div>ุงูุงุฎุชุจุงุฑ</div>
    </a>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // ูุชุบูุฑุงุช ุงูุงุฎุชุจุงุฑ
      let currentQuestion = 0;
      let score = 0;
      let timer;
      let timeLeft = 30;
      let questions = [];
      
      // ุชููุฆุฉ ุงูุงุฎุชุจุงุฑ
      function initQuiz() {
        // ุงุณุชุฎุฏุงู ุงูุฃุณุฆูุฉ ุงููุญุฏุซุฉ
        questions = quizQuestions.slice();
        
        // ุชุฑุชูุจ ุงูุฃุณุฆูุฉ ุนุดูุงุฆููุง
        shuffleArray(questions);
        
        // ุนุฑุถ ุงูุณุคุงู ุงูุฃูู
        showQuestion();
        
        // ุจุฏุก ุงูุนุฏุงุฏ ุงูุชูุงุฒูู
        startTimer();
      }
      
      // ุฏุงูุฉ ุนุฑุถ ุงูุณุคุงู
      function showQuestion() {
        const questionData = questions[currentQuestion];
        const questionText = document.getElementById('question-text');
        const answersBox = document.getElementById('answers-box');
        
        // ุนุฑุถ ูุต ุงูุณุคุงู
        questionText.textContent = questionData.q;
        
        // ุฅูุดุงุก ุฃุฒุฑุงุฑ ุงูุฅุฌุงุจุงุช
        answersBox.innerHTML = '';
        
        // ูุณุฎ ูุตูููุฉ ุงูุฅุฌุงุจุงุช ูุชุฑุชูุจูุง ุนุดูุงุฆููุง
        const answers = questionData.a.slice();
        shuffleArray(answers);
        
        // ุฅูุดุงุก ุฃุฒุฑุงุฑ ุงูุฅุฌุงุจุงุช
        answers.forEach(function(answer, index) {
          const button = document.createElement('button');
          button.className = 'clickable';
          button.textContent = answer;
          button.addEventListener('click', function() {
            // ุงูุชุญูู ูู ุงูุฅุฌุงุจุฉ
            checkAnswer(answer, questionData);
          });
          answersBox.appendChild(button);
        });
        
        // ุฅุนุงุฏุฉ ุถุจุท ุงูุนุฏุงุฏ ุงูุชูุงุฒูู
        resetTimer();
      }
      
      // ุฏุงูุฉ ุงูุชุญูู ูู ุงูุฅุฌุงุจุฉ
      function checkAnswer(selectedAnswer, questionData) {
        const correctAnswer = questionData.a[questionData.correct];
        
        if (selectedAnswer === correctAnswer) {
          // ุงูุฅุฌุงุจุฉ ุตุญูุญุฉ
          score++;
          
          // ุชุดุบูู ุตูุช ุงูููุฑุฉ
          if (typeof playClickSound === 'function') {
            playClickSound();
          }
        } else {
          // ุงูุฅุฌุงุจุฉ ุฎุงุทุฆุฉ
          // ุชุดุบูู ุตูุช ุงูููุฑุฉ
          if (typeof playClickSound === 'function') {
            playClickSound();
          }
        }
        
        // ุงูุงูุชูุงู ุฅูู ุงูุณุคุงู ุงูุชุงูู ุฃู ุฅููุงุก ุงูุงุฎุชุจุงุฑ
        currentQuestion++;
        
        if (currentQuestion < questions.length) {
          showQuestion();
        } else {
          endQuiz();
        }
      }
      
      // ุฏุงูุฉ ุฅููุงุก ุงูุงุฎุชุจุงุฑ
      function endQuiz() {
        // ุฅููุงู ุงูุนุฏุงุฏ ุงูุชูุงุฒูู
        clearInterval(timer);
        
        // ุฅุฎูุงุก ุญุงููุฉ ุงูุฃุณุฆูุฉ ูุฅุธูุงุฑ ุญุงููุฉ ุงููุชูุฌุฉ
        document.getElementById('question-container').style.display = 'none';
        document.getElementById('result-container').style.display = 'block';
        
        // ุนุฑุถ ุงููุชูุฌุฉ
        const resultText = document.getElementById('result-text');
        const percentage = Math.round((score / questions.length) * 100);
        
        resultText.textContent = `ููุฏ ุญุตูุช ุนูู ${score} ูู ${questions.length} (${percentage}%)`;
        
        // ุฅุฐุง ูุงูุช ุงููุชูุฌุฉ ูุงููุฉุ ุนุฑุถ ุฑุงุจุท ุงูุดูุงุฏุฉ
        if (score === questions.length) {
          const resultButtons = document.querySelector('.result-buttons');
          
          // ุฅูุดุงุก ุฒุฑ ุงูุดูุงุฏุฉ ุฅุฐุง ูู ููู ููุฌูุฏูุง
          if (!document.getElementById('certificate-button')) {
            const certificateButton = document.createElement('a');
            certificateButton.id = 'certificate-button';
            certificateButton.href = 'certificate.html';
            certificateButton.className = 'result-button certificate clickable';
            certificateButton.textContent = 'ุนุฑุถ ุงูุดูุงุฏุฉ';
            resultButtons.appendChild(certificateButton);
          }
        }
        
        // ุฅุถุงูุฉ ูุณุชูุน ูุฒุฑ ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ
        document.getElementById('retry-button').addEventListener('click', function() {
          // ุฅุนุงุฏุฉ ุชููุฆุฉ ุงูุงุฎุชุจุงุฑ
          currentQuestion = 0;
          score = 0;
          
          // ุฅุฎูุงุก ุญุงููุฉ ุงููุชูุฌุฉ ูุฅุธูุงุฑ ุญุงููุฉ ุงูุฃุณุฆูุฉ
          document.getElementById('result-container').style.display = 'none';
          document.getElementById('question-container').style.display = 'block';
          
          // ุฅุนุงุฏุฉ ุชุดุบูู ุงูุงุฎุชุจุงุฑ
          initQuiz();
        });
      }
      
      // ุฏุงูุฉ ุจุฏุก ุงูุนุฏุงุฏ ุงูุชูุงุฒูู
      function startTimer() {
        const timerBar = document.getElementById('timer-bar');
        const timerText = document.getElementById('timer-text');
        const timerContainer = document.querySelector('.timer-container');
        
        // ุฅุนุงุฏุฉ ุถุจุท ุงูุนุฏุงุฏ ุงูุชูุงุฒูู
        timeLeft = 30;
        timerText.textContent = timeLeft;
        timerBar.style.width = '100%';
        timerContainer.classList.remove('timer-warning', 'timer-danger');
        
        // ุจุฏุก ุงูุนุฏุงุฏ ุงูุชูุงุฒูู
        timer = setInterval(function() {
          timeLeft--;
          timerText.textContent = timeLeft;
          timerBar.style.width = (timeLeft / 30 * 100) + '%';
          
          // ุชุบููุฑ ููู ุงูุนุฏุงุฏ ุนูุฏูุง ููุชุฑุจ ุงูููุช ูู ุงูููุงูุฉ
          if (timeLeft <= 10 && timeLeft > 5) {
            timerContainer.classList.add('timer-warning');
            timerContainer.classList.remove('timer-danger');
          } else if (timeLeft <= 5) {
            timerContainer.classList.remove('timer-warning');
            timerContainer.classList.add('timer-danger');
          }
          
          // ุฅุฐุง ุงูุชูู ุงูููุชุ ุงูุงูุชูุงู ุฅูู ุงูุณุคุงู ุงูุชุงูู
          if (timeLeft <= 0) {
            clearInterval(timer);
            
            // ุงูุงูุชูุงู ุฅูู ุงูุณุคุงู ุงูุชุงูู ุฃู ุฅููุงุก ุงูุงุฎุชุจุงุฑ
            currentQuestion++;
            
            if (currentQuestion < questions.length) {
              showQuestion();
            } else {
              endQuiz();
            }
          }
        }, 1000);
      }
      
      // ุฏุงูุฉ ุฅุนุงุฏุฉ ุถุจุท ุงูุนุฏุงุฏ ุงูุชูุงุฒูู
      function resetTimer() {
        clearInterval(timer);
        startTimer();
      }
      
      // ุฏุงูุฉ ุชุฑุชูุจ ุงููุตูููุฉ ุนุดูุงุฆููุง
      function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }
      
      // ุจุฏุก ุงูุงุฎุชุจุงุฑ
      initQuiz();
    });
  </script>
</body>
</html>
